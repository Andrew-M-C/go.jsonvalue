<font size=6>はじめに</font>

[目次](./README.md) | [次のページ](./02_quick_start.md)

---

- [概要](#概要)
- [なぜJsonvalueを設計したのか](#なぜjsonvalueを設計したのか)
- [応用例](#応用例)
- [並行性](#並行性)

---

## 概要

[jsonvalue](https://github.com/Andrew-M-C/go.jsonvalue)へようこそ。これは[Go](https://go.dev/)で開発されたリポジトリです。

このリポジトリは、非構造化JSONデータを処理するためのパッケージを提供することを目的として設計されており、`encoding/json`の標準的な`map[string]interface{}`パターンの代替として機能します。従来の方法は非常に不便で非効率的です。もしこれに興味がおありでしたら、私のベンチマークテスト[リポジトリ](https://github.com/Andrew-M-C/go.jsonvalue-test)をご参照ください。

また、このリポジトリに対していくつかの要求や提案をいただきました。実用的な作業のためのものもあれば、バグレポートもあります。これらのシナリオはすべて、このwikiで後ほど説明いたします。

このリポジトリの[作者](https://github.com/Andrew-M-C/)は[Tencent](https://www.tencent.com)のプログラマーであるため、実際にこのリポジトリはGithubよりもTencent社内でより多く使用されています。

---

## なぜJsonvalueを設計したのか

このリポジトリを設計した理由：

1. まず第一に、GoでのJSONの作業のほとんどは`struct`型によって実現されます。しかし、非構造化JSONデータに遭遇した場合、`map[string]interface{}`型を使用する必要があります。しかし、よく知られているように、`interface{}`型を扱うのは非常に複雑です。
   - 元ANSI-Cプログラマーとして、[cJSON](https://github.com/DaveGamble/cJSON)が最も人気のある選択肢でした。そこで、cJSONに似たこのjsonvalueを開発しました。
2. クラウドサービスの一部のJSON APIは奇妙で複雑です。例えば、オブジェクトの中のオブジェクトの中のオブジェクト...といった深い階層の一部のオブジェクトをチェックする必要がある場合があります。
   - そこで、深いパスでサブ値にアクセスするメソッドを追加しました。また、深く複雑なパスを自動的に作成するメソッドも追加しました。
   - これにより、かなり多くのコードを節約できます。
3. `encoding/json`では対応していない、または予期しない状況への対応。例えば、IEEE浮動小数点型の`Inf`と`NaN`、`map[string]interface{}`の大文字小文字を区別しないサポートなど。

---

## 応用例

万能薬はありません。様々なJSONシナリオに対して、最も適した解決策を選択すべきです。

Jsonvalueに関して、最も推奨されるシナリオは以下の通りです：

- 複雑なJSONデータ構造を素早く構築し、それをシリアライズする。これは私が知る限り最も一般的な使用法です。
- 非構造化JSONキーと値の完全な解析とダンプ/変換/分析。これは私の同僚によるオフラインデータクレンジングで広く使用されています。
- `Inf`や`NaN`などの不正なJSON値を処理する。
- その他の特別なシナリオ。セクション[追加オプション](./12_option.md)をご参照ください。

---

## 並行性

**重要**: Jsonvalueはgoroutineセーフではありません。並行使用の場合は、追加のロッカーを使用してください。
